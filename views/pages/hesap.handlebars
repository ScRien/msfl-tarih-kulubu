<link rel="stylesheet" href="/css/hesap.css" />

<section class="account-wrapper">

  <!-- SOL MENÜ -->
  <aside class="account-sidebar">

    <a 
      href="/@{{user.username}}" 
      class="public-profile-btn"
    >
      Profilimi Görüntüle →
    </a>

    <div class="sidebar-category">Hesap</div>
    <button class="sidebar-item active" data-target="profile">Profil Bilgileri</button>

    <div class="sidebar-category">Hesap Ayarları</div>
    <button class="sidebar-item disabled">Tema Ayarları (Yakında)</button>
    <button class="sidebar-item disabled">Bildirimler (Yakında)</button>

    <div class="sidebar-category">Profil Medyası</div>
    <button class="sidebar-item" data-target="media">Profil Fotoğrafları</button>

    <div class="sidebar-category">Sosyal</div>
    <button class="sidebar-item" data-target="social">Sosyal Medya</button>

    <div class="sidebar-category">Gizlilik &amp; Güvenlik</div>
    <button class="sidebar-item" data-target="password">Şifre Değiştir</button>
    <button class="sidebar-item" data-target="cookies">Çerez Ayarları</button>
    <button class="sidebar-item" data-target="data-usage">Veri Kullanımı</button>
    <button class="sidebar-item" data-target="devices" disabled>Giriş Yapılan Cihazlar (Yakında)</button>
    <button class="sidebar-item danger" data-target="delete">Hesabı Sil</button>

    <div class="sidebar-category">Gelişmiş Güvenlik</div>
    <button class="sidebar-item disabled">2FA Doğrulama (Yakında)</button>
    <button class="sidebar-item disabled">Oturum Yönetimi (Yakında)</button>

  </aside>

  <!-- SAĞ İÇERİK -->
  <main class="account-content">

    {{#if error}}
      <div class="account-alert error">❌ {{error}}</div>
    {{/if}}

    {{#if success}}
      <div class="account-alert success">✅ {{success}}</div>
    {{/if}}

    <!-- PROFİL -->
    <div class="content-box" id="profile" style="display: block;">
      <h2 class="title">Profil Bilgileri</h2>
      <p class="desc">Bilgileriniz güvende. Dilediğiniz zaman güncelleyebilirsiniz.</p>

      <form action="/hesap/profil" method="POST">
        
        <div class="form-group">
          <label>Kullanıcı Adı</label>
          <input type="text" value="{{user.username}}" disabled />
          <span class="info">Kullanıcı adı değiştirilemez.</span>
        </div>

        <div class="form-group">
          <label>Ad</label>
          <input type="text" name="name" value="{{user.name}}" />
        </div>

        <div class="form-group">
          <label>Soyad</label>
          <input type="text" name="surname" value="{{user.surname}}" />
        </div>

        <div class="form-group">
          <label>E-posta</label>
          <input type="email" name="email" value="{{user.email}}" />
          <span class="info">E-posta doğrulama sistemi ileride eklenecek.</span>
        </div>

        <!-- BİYOGRAFİ -->
        <div class="form-group">
          <label>Biyografi</label>
          <textarea 
            name="bio" 
            rows="4" 
            maxlength="200"
            placeholder="Kendinizi tanıtan kısa bir yazı..."
          >{{user.bio}}</textarea>

          <div class="bio-hint">
            <span>200 karakter sınırı</span>
          </div>
        </div>

        <div class="btn-group">
          <button type="submit" class="btn save">Kaydet</button>
          <button type="reset" class="btn cancel">İptal</button>
        </div>
      </form>
    </div>

    <!-- SOSYAL MEDYA -->
    <div class="content-box" id="social">
      <h2 class="title">Sosyal Medya Bağlantıları</h2>
      <p class="desc">Sosyal medya linklerin profilinde görünecektir.</p>

      <form action="/hesap/social" method="POST">

        <div class="form-group">
          <label>Instagram</label>
          <input type="text" name="instagram" placeholder="@kullanici" 
            value="{{user.social.instagram}}" />
        </div>

        <div class="form-group">
          <label>X (Twitter)</label>
          <input type="text" name="x" placeholder="@kullanici"
            value="{{user.social.x}}" />
        </div>

        <div class="form-group">
          <label>GitHub</label>
          <input type="text" name="github" placeholder="github.com/kullanici"
            value="{{user.social.github}}" />
        </div>

        <div class="btn-group">
          <button type="submit" class="btn save">Kaydet</button>
          <button type="reset" class="btn cancel">İptal</button>
        </div>

      </form>
    </div>

    <!-- PROFIL MEDYASI -->
    <div class="content-box" id="media">
      <h2 class="title">Profil Fotoğrafları</h2>
      <p class="desc">Profil fotoğrafı ve kapak fotoğrafınızı buradan yönetebilirsiniz.</p>

      <!-- AVATAR -->
      <div class="media-section">
        <h3 class="media-title">Profil Fotoğrafı</h3>

        <img 
          id="avatar-preview"
          class="media-avatar-preview"
          alt="Avatar"
          src="{{#if user.avatar}}{{user.avatar}}{{else}}/img/default-avatar.png{{/if}}"
        />

        <p class="info">
          Önerilen boyut: 300×300 px (kare).
        </p>

        <form action="/hesap/avatar-yukle" method="POST" enctype="multipart/form-data">
          <input 
            id="avatar-input"
            type="file" 
            name="avatar" 
            accept="image/*" 
            class="media-input" 
            required 
          />
          <button class="btn save" type="submit">Profil Fotoğrafını Güncelle</button>
        </form>
      </div>

      <!-- KAPAK FOTOĞRAFI -->
      <div class="media-section" style="margin-top: 32px;">
        <h3 class="media-title">Kapak Fotoğrafı</h3>

        <img 
          id="cover-preview"
          class="media-cover-preview"
          alt="Kapak Fotoğrafı"
          src="{{#if user.coverPhoto}}{{user.coverPhoto}}{{else}}/img/default-cover.jpg{{/if}}"
        />

        <p class="info">
          Önerilen boyut: 1200×280 px yatay görsel.
        </p>

        <form action="/hesap/kapak-yukle" method="POST" enctype="multipart/form-data">
          <input 
            id="cover-input"
            type="file" 
            name="cover" 
            accept="image/*" 
            class="media-input" 
            required 
          />
          <button class="btn save" type="submit">Kapak Fotoğrafını Güncelle</button>
        </form>
      </div>

    </div>

    <!-- ŞİFRE -->
    <div class="content-box" id="password">
      <h2 class="title">Şifre Değiştir</h2>
      <p class="desc">Mail adresine doğrulama kodu gönderilecek.</p>

      <!-- 1) KOD GÖNDERME FORMU -->
      <form action="/hesap/sifre-kod" method="POST" class="form-group">
        <button class="btn save" type="submit">
          <i class="fa-solid fa-paper-plane"></i> Mailime Kod Gönder
        </button>
      </form>

      <!-- 2) KOD DOĞRULAMA KUTUSU -->
      <div id="verifyBox" style="display:none; margin-top:20px;">
        <h3 class="subtitle">Doğrulama Kodu</h3>

        <form action="/hesap/sifre-kod-dogrula" method="POST">
          <input type="text" name="code" placeholder="6 haneli kodu girin" required class="input" />

          <button class="btn green" type="submit">
            <i class="fa-solid fa-lock"></i> Kodu Doğrula
          </button>
        </form>
      </div>

      <!-- 3) YENİ ŞİFRE FORMU -->
      <div id="newPasswordBox" style="display:none; margin-top:25px;">
        <h3 class="subtitle">Yeni Şifre Oluştur</h3>

        <form action="/hesap/sifre-degistir" method="POST">

          <input type="password" name="newPassword" placeholder="Yeni Şifre" required class="input" />
          <input type="password" name="newPassword2" placeholder="Yeni Şifre Tekrar" required class="input" />

          <button class="btn save" type="submit">
            <i class="fa-solid fa-unlock-keyhole"></i> Şifreyi Güncelle
          </button>
        </form>
      </div>
    </div>


    <!-- ÇEREZLER -->
    <div class="content-box" id="cookies">
      <h2 class="title">Çerez Ayarları</h2>
      <p class="desc">Tarayıcı çerezleri kullanıcı deneyimini iyileştirmeye yardımcı olur.</p>

      <form action="/hesap/cookies" method="POST">
        <div class="toggle-row">
          <label>Gerekli Çerezler</label>
          <input type="checkbox" checked disabled />
        </div>

        <div class="toggle-row">
          <label>Analitik Çerezler</label>
          <label class="switch">
            <input
              type="checkbox"
              name="analyticsCookies"
              {{#if user.analyticsCookies}}checked{{/if}}
            />
            <span class="slider"></span>
          </label>
        </div>

        <div class="toggle-row">
          <label>Kişiselleştirme Çerezleri</label>
          <label class="switch">
            <input
              type="checkbox"
              name="personalizationCookies"
              {{#if user.personalizationCookies}}checked{{/if}}
            />
            <span class="slider"></span>
          </label>
        </div>

        <div class="btn-group">
          <button type="submit" class="btn save">Kaydet</button>
          <button type="reset" class="btn cancel">İptal</button>
        </div>
      </form>
    </div>

    <!-- VERİ KULLANIMI -->
    <div class="content-box" id="data-usage">
      <h2 class="title">Veri Kullanımı</h2>

      <form action="/hesap/data-usage" method="POST">
        <div class="toggle-row">
          <label>Hizmet kalitesi için anonim kullanım verisi</label>
          <label class="switch">
            <input
              type="checkbox"
              name="serviceDataUsage"
              {{#if user.serviceDataUsage}}checked{{/if}}
            />
            <span class="slider"></span>
          </label>
        </div>

        <div class="toggle-row">
          <label>Kişiselleştirilmiş içerik önerileri</label>
          <label class="switch">
            <input
              type="checkbox"
              name="personalizedContent"
              {{#if user.personalizedContent}}checked{{/if}}
            />
            <span class="slider"></span>
          </label>
        </div>

        <div class="btn-group">
          <button type="submit" class="btn save">Kaydet</button>
          <button type="reset" class="btn cancel">İptal</button>
        </div>
      </form>
    </div>

    <!-- CİHAZLAR -->
    <div class="content-box" id="devices">
      <h2 class="title">Giriş Yapılan Cihazlar</h2>
      <p class="desc">
        Bu liste şu an örnek verilerle dolu. Backend eklendiğinde giriş yaptığınız gerçek cihazlar burada görünecek.
      </p>

      <table class="device-table">
        <thead>
          <tr>
            <th>Cihaz</th>
            <th>Konum</th>
            <th>Tarih</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Chrome – Windows 11</td>
            <td>İstanbul</td>
            <td>14/11/2025</td>
          </tr>
          <tr>
            <td>Safari – iPhone 13</td>
            <td>Kadıköy</td>
            <td>10/11/2025</td>
          </tr>
          <tr>
            <td>Firefox – Ubuntu</td>
            <td>Beşiktaş</td>
            <td>02/11/2025</td>
          </tr>
        </tbody>
      </table>

      <button class="btn save" style="margin-top: 25px;" disabled>
        Tüm Cihazlardan Çıkış Yap (Yakında)
      </button>
    </div>

    <!-- HESAP SİL -->
    <div class="content-box" id="delete">
      <h2 class="title danger">Hesabı Sil</h2>

      <p class="warn">
        Bu işlem <b>geri alınamaz</b>. Hesabınızı silmeden önce tüm verilerinizi indirmenizi öneririz.
      </p>

      <form action="/hesap/sil" method="POST" onsubmit="return confirm('Hesabınızı VE tüm içeriklerinizi kalıcı olarak silmek istediğinize emin misiniz?');">
        <button class="danger-btn">Hesabı Kalıcı Olarak Sil</button>
      </form>
    </div>

  </main>
</section>

<script src="/js/hesap.js"></script>